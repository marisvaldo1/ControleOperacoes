<!-- Modal Selecionar Opção -->
<div class="modal modal-blur fade" id="modalSelecionarOpcao" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document" style="max-width: 1000px;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <span id="tituloModalOpcoes">Selecione uma Opção</span>
                    <span id="modalSelecaoMarketStatus" class="ms-2" style="cursor: help; font-size: 1.2rem;"></span>
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Filtros -->
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label class="form-label">Filtrar por Vencimento:</label>
                        <select class="form-select" id="filtroVencimento">
                            <option value="TODOS">Todos os vencimentos</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Buscar:</label>
                        <input type="text" class="form-control text-uppercase" id="filtroBusca" placeholder="Buscar por código...">
                    </div>
                </div>
                
                <!-- Info do ativo base -->
                <div class="alert alert-primary mb-3" id="infoAtivoBase" style="display: none;">
                    <div class="row">
                        <div class="col-md-4">
                            <strong>Ativo:</strong> <span id="infoAtivoNome">-</span>
                        </div>
                        <div class="col-md-4">
                            <strong>Cotação Atual:</strong> <span id="infoCotacaoAtual">-</span>
                        </div>
                        <div class="col-md-4">
                            <strong>Total de Opções:</strong> <span id="infoTotalOpcoes">-</span>
                        </div>
                    </div>
                </div>

                <!-- Loading -->
                <div id="loadingOpcoes" class="text-center py-5">
                    <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
                        <span class="visually-hidden">Carregando...</span>
                    </div>
                    <p class="mt-3 text-muted">Buscando opções disponíveis...</p>
                </div>

                <!-- Tabela de Opções -->
                <div class="table-responsive" id="containerTabelaOpcoes" style="display: none; max-height: 500px;">
                    <table class="table table-vcenter table-hover card-table table-striped" id="tableOpcoes">
                        <thead class="sticky-top bg-dark text-white">
                            <tr>
                                <th colspan="4" class="text-center bg-success bg-opacity-10 text-success border-bottom-0">CALLS (Opção de Compra)</th>
                                <th class="text-center bg-secondary bg-opacity-10 border-bottom-0"> | </th>
                                <th colspan="4" class="text-center bg-danger bg-opacity-10 text-danger border-bottom-0">PUTS (Opção de Venda)</th>
                            </tr>
                            <tr>
                                <!-- CALL SIDE -->
                                <th style="width: 12%">Ativo</th>
                                <th style="width: 10%">Prêmio</th>
                                <th style="width: 8%">Dias <span class="text-decoration-none cursor-help" data-bs-toggle="tooltip" title="Dias para o vencimento (Corridos/Úteis)">❓</span></th>
                                <th style="width: 8%">Delta</th>
                                
                                <!-- CENTER -->
                                <th class="text-center bg-secondary bg-opacity-10 border-start border-end" style="width: 12%">Strike</th>
                                
                                <!-- PUT SIDE -->
                                <th style="width: 8%">Delta</th>
                                <th style="width: 8%">Dias <span class="text-decoration-none cursor-help" data-bs-toggle="tooltip" title="Dias para o vencimento (Corridos/Úteis)">❓</span></th>
                                <th style="width: 10%">Prêmio</th>
                                <th style="width: 12%">Ativo</th>
                            </tr>
                        </thead>
                        <tbody id="tbodyOpcoes"></tbody>
                    </table>
                </div>

                <!-- Sem resultados -->
                <div id="semOpcoes" class="text-center py-5" style="display: none;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-muted mb-3"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>
                    <p class="text-muted">Nenhuma opção encontrada para este ativo.</p>
                </div>
            </div>
            <div class="modal-footer">
                <span class="text-muted me-auto" id="contadorOpcoes">0 opções exibidas</span>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
            </div>
        </div>
    </div>
</div>
